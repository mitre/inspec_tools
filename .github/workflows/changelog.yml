name: Generate CHANGELOG.md
on:
  push:
  pull_request:
jobs:
  test:
    name: Generate CHANGELOG.md
    runs-on: ubuntu-latest
    steps:
       - name: Setup ruby
         uses: actions/setup-ruby@v1
       - name: Checkout inspec_tools
         uses: actions/checkout@v2
         with:
           lfs: true
           token: ${{secrets.GITHUB_TOKEN}}
       - name: Run github_changelog_generator
         run: |
           export CHANGELOG_GITHUB_TOKEN=${{ secrets.GITHUB_TOKEN }}
           echo "WHATEVER" > CHANGELOG.md
       - name: Commit and push changes to CHANGELOG.md
         uses: Bialogs/commit@master
         with:
           github-token: ${{ secrets.GITHUB_TOKEN }}
           push-branch: 'test-update-github-actions'
           commit-message: 'Publish changelog'
           force-add: 'true'
         env:
           CI: true
